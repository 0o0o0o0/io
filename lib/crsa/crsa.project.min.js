var CrsaProjectBrowser=function(e){var t=this;this.options=null,this.crsaProjects=null,this.onFileSelected=null,this.title=null,this.intro=null,this.selectedProject=null;var l={modal:!0};this.opts=$.extend({},l,e),this.setProjects=function(e){this.crsaProjects=e},this.show=function(){var e=null,l=null,a=$("<div/>",{"class":"project-browser"}).html('<div class="clearfix"><div class="pills"></div><div class="tabs"></div></div>'),i=$('<ul class="nav nav-pills nav-stacked"></ul>').appendTo(a.find(".pills")),s=$('<div class="tab-content"></div>').appendTo(a.find(".tabs"));if($.each(this.crsaProjects,function(a,n){for(var o="project-browser-tab-"+a,d=$('<li><a href="#'+o+'" data-toggle="pill">'+n.name+"</a></li>").appendTo(i),r=$('<ul class="tab-pane fade" id="'+o+'"></ul>').appendTo(s),c=0;c<n.root.children.length;c++){var p=n.root.children[c];if(p.isFile){var h=$("<li/>").html("<h3>"+p.name+"</h3>").data("file",p).data("project",n).appendTo(r);p.image&&$("<img/>",{src:p.image}).prependTo(h),e==p&&(h.addClass("selected"),l=h)}}(t.selectedProject?t.selectedProject==n:0==a)&&(d.addClass("active"),r.addClass("active in")),d.tab()}),this.intro){var n=$(this.intro).prependTo(a);isApp()&&n.find("a").on("click",function(e){e.preventDefault();var t=require("nw.gui"),l=$(e.delegateTarget).attr("href");t.Shell.openExternal(l)})}var o=makeModalDialog(this.title?this.title:"Select item","Close",null,a,function(){},function(){},function(e){e.find(".modal-dialog").css("width","890px")});s.find("li").on("click",function(a){var i=$(a.delegateTarget),s=i.data("file");l&&(l.removeClass("selected"),l=null),e==s?e=null:(e=s,l=i,i.addClass("selected")),t.onFileSelected&&t.onFileSelected(s,i.data("project")),o.modal("hide"),a.preventDefault()})}};