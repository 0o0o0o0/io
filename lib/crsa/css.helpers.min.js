function crsaMakeUrlAbsolute(t){return t.match(/^[a-z]*:\/\//i)?t:crsaMakeUrlFromFile(crsaGetAppDir()+t)}var crsaMakeLinkRelativeTo=function(t,i){var e=/^[a-z:]*\/+/i,r=t.match(e);if(!r)return t;var a=r[0],s=i.match(e);if(!s)return t;var n=s[0];if(a.toLowerCase()!=n.toLowerCase())return t;for(var h=t.replace(e,"").split("/"),o=i.replace(e,"").split("/"),c=0;c<h.length&&c<o.length&&h[c]==o[c];)c++;if(0==c)return t;if(h.splice(0,c),o.length>c+1)for(var l=0;l<o.length-c-1;l++)h.unshift("..");var u=h.join("/");return u.indexOf("../..")>=0?t:u},splitCssValue=function(t,i){var e=[];if(!t||0==t.length)return e;t+=" \n";for(var r="",a=!1,s=0,n=0,h=0;h<t.length;h++){var o=t.charAt(h);if(" "==o)a=!0;else{if(i&&","==o&&0==s&&0==n){e.push($.trim(r)),a=!1,r="",e.push(",");continue}a&&0==s&&0==n&&(e.push($.trim(r)),a=!1,r=""),"("==o?s++:")"==o?s--:('"'==o||"'"==o)&&(n=0==n?1:0)}r+=o}return r=$.trim(r),r.length>0&&"\n"!=r&&e.push(r),e},getUrlFromCssUrlValue=function(t){t=t.replace(/[\'\"]/g,"");var i=t.match(/url\(([^\)]*)\)/i);return i?i[1]:t},CssBackgroundParser=function(t){var i=this;this.parse=function(t){this.css=t,this.color="",this.image="",this.repeat="",this.attachment="",this.position="",this.important=!1;var i=["transparent","none","repeat","scroll","0%","0%"],r=splitCssValue(t,!0);r.push(",");for(var a=[],s=0;s<r.length;s++)r[s].match(/\!important/i)?this.important=!0:","==r[s]?(this.color.length>0&&(this.color+=", "),this.color+=a.length>=1?a[0]:i[0],this.image.length>0&&(this.image+=", "),this.image+=a.length>=2?a[1]:i[1],this.repeat.length>0&&(this.repeat+=", "),this.repeat+=a.length>=3?a[2]:i[2],this.attachment.length>0&&(this.attachment+=", "),this.attachment+=a.length>=4?a[3]:i[3],this.position.length>0&&(this.position+=", "),this.position+=a.length>=5?a[4]:i[4],this.position+=" ",this.position+=a.length>=6?a[5]:i[5],a=[]):a.push(r[s]);this.color=e(this.color),this.image=e(this.image),this.repeat=e(this.repeat),this.attachment=e(this.attachment),this.position=e(this.position)};var e=function(t){return t+(i.important?" !important":"")};this.getValue=function(t){switch(t.toLowerCase()){case"background-color":return this.color;case"background-image":return this.image;case"background-repeat":return this.repeat;case"background-attachment":return this.attachment;case"background-position":return this.position;default:return null}},t&&this.parse(t)};